<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper SYSTEM "mybatis-3-mapper.dtd">
<mapper namespace="com.yedamMiddle.review.mapper.ReviewMapper">

	<!-- 나의 리뷰 가져오기 -->
	<select id="selectMyReview" resultType="com.yedamMiddle.review.service.ReviewVO"
								parameterType="int">
		SELECT * FROM review WHERE user_no=#{userNo}
	</select>
	
	<!-- 해당상품의 리뷰 가져오기(제품 상세페이지) -->
	<select id="selectProductReview" resultType="com.yedamMiddle.review.service.ReviewVO"
								parameterType="int">
		SELECT * FROM review WHERE product_no=#{productNo}
	</select>
	
	<!-- 리뷰작성 -->
	<insert id="insertReview" parameterType="com.yedamMiddle.review.service.ReviewVO">
		INSERT INTO review  VALUES(seq_review.nextval, #{merUid}, #{content},#{starCnt}
		,SYSDATE,0,#{productNo},#{UserNo},#{reviewImage})
	</insert>
	
	<!-- 리뷰수정 -->
	<update id="updateReview" parameterType="com.yedamMiddle.review.service.ReviewVO">
		UPDATE review SET content=#{content}, star_cnt=#{starCnt}, review_image=#{reviewImage}
		WHERE mer_uid=#{merUid} and user_no=#{UserNo}
	</update>
	
	<!-- 리뷰삭제 -->
	<delete  id="deleteReview" parameterType="com.yedamMiddle.review.service.ReviewVO">>
		DELETE * FROM review WHERE mer_uid=#{merUid} and user_no=#{UserNo}
	</delete>

</mapper>